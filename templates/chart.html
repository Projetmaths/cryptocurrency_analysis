{% extends "base.html" %}
{% block title %} Cryptotrading {% endblock %}

{% block script %}
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
<!--<script src="{{url_for('static', filename='javascript/chart.js')}}"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js" integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw==" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
{% endblock %}

{% block link %}
<link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/index.css') }}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
<link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
{% endblock %}

{% block content %}
    <h1>Chart</h1>

    <div style="width: 75%">
        <canvas class="myChart"></canvas>
    </div>
    <script type="text/javascript">
    	var labels = {{labels|tojson}};
    	//var label = data.map(function(l) {return l.update});
    	console.log(labels)
    	var datas = {{data|tojson}};
    	//var prix = data.map(function(p) {return p.price});
	    /*
    	var ctx = document.getElementByClass('myChart').getContext('2d');
    	var data = {
	            labels: label,
	            datasets: [{
	                label: 'Price',
	                backgroundColor: window.chartColors.red,
	                borderColor: window.chartColors.red,
	                data: [prix]
	            }]};
	    var options = ;
    	var config = {
    		type: 'line',
	        data: data,
	        options: options
	    };
    	var chart = new Chart(ctx, config);*/
    	/*function create(index, element){
    		var ctx = element.getContext("2d");
    		new Chart(ctx).PolarAreas(datas[index]);
    	};
    	for (let i = 0; i < (datas.length)/2; i++) {
    		var str = 'myChart' 
    		create(i, str);
    	}*/

    	function BuildChart(labels, values, chartTitle) {
		    var ctx = document.getElementById("myChart").getContext('2d');
		    var myChart = new Chart(ctx, {
		    type: 'bar',
		    data: {
		        labels: labels, // Our labels
		        datasets: [{
			        label: chartTitle, // Name the series
			        data: values, // Our values
			        backgroundColor: [ // Specify custom colors
			        'rgba(255, 99, 132, 0.2)',
			        'rgba(54, 162, 235, 0.2)',
			        'rgba(255, 206, 86, 0.2)',
			        'rgba(75, 192, 192, 0.2)',
			        'rgba(153, 102, 255, 0.2)',
			        'rgba(255, 159, 64, 0.2)'
		        	],
		        	borderColor: [ // Add custom color borders
			        'rgba(255,99,132,1)',
			        'rgba(54, 162, 235, 1)',
			        'rgba(255, 206, 86, 1)',
			        'rgba(75, 192, 192, 1)',
			        'rgba(153, 102, 255, 1)',
			        'rgba(255, 159, 64, 1)'
		        	],
		        	borderWidth: 1 // Specify bar border width
		        }]
		    },
		    options: {
		        responsive: true, // Instruct chart js to respond nicely.
		        maintainAspectRatio: false, // Add to prevent default behavior of full-width/height 
		    }
		  });
		  return myChart;
		}
	</script>	
{% endblock %}

